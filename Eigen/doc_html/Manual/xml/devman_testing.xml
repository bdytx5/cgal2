<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="devman_testing" kind="page">
    <compoundname>devman_testing</compoundname>
    <title>Running a Testsuite Locally</title>
    <detaileddescription>
<para><simplesect kind="authors"><para>CGAL developers</para></simplesect>
</para><sect1 id="devman_testing_1pkgTestsuite">
<title>Running the Testsuite Locally of a Single Package</title>
<para>Before submitting a change for integration into CGAL it is good style to run the testsuite of the modified package and all packages that could be impacted. Here is what you need:</para><para><itemizedlist>
<listitem><para>A shell such as bash (install Cygwin, when you are on Windows)</para></listitem><listitem><para><emphasis>optional:</emphasis> put <computeroutput>Scripts/scripts</computeroutput> and <computeroutput>Scripts/developer_scripts</computeroutput> on your <computeroutput>PATH</computeroutput> environment variable or Alternatively, you can call the scripts mentioned below using their full path or a relative path</para></listitem><listitem><para>define the environment variable <computeroutput>CGAL_DIR</computeroutput>. It should be the directory where you built <ref refid="namespaceCGAL" kindref="compound">CGAL</ref>.</para></listitem><listitem><para><emphasis>optional:</emphasis> define the environment variables for Boost, GMP, and any optional third party lib, e.g. Eigen.</para></listitem><listitem><para><emphasis>On Windows:</emphasis> define the environment variable <computeroutput>MAKE_CMD</computeroutput> (put the line <computeroutput>export MAKE_CMD=nmake</computeroutput> in your <computeroutput>$HOME/.bashrc</computeroutput> for VC++)</para></listitem><listitem><para><emphasis>On Windows:</emphasis> define the environment variable <computeroutput>CMAKE_GENERATOR</computeroutput> (put the line `export CMAKE_GENERATOR=&apos;-GNMake Makefiles&apos;<computeroutput>in your</computeroutput>$HOME/.bashrc` for VC++)</para></listitem><listitem><para>go in the directory you want to test</para></listitem><listitem><para>Run <computeroutput>cgal_test_with_cmake</computeroutput> in the <computeroutput>test</computeroutput> and <computeroutput>examples</computeroutput> directories of the package. This should run CMake, compile and run, and you can see what happened in the generated file <computeroutput>error.txt</computeroutput>.</para></listitem></itemizedlist>
</para></sect1>
<sect1 id="devman_testing_1fullTestsuite">
<title>Running the Whole Testsuite</title>
<para>We describe here how to proceed to the testing of a full copy of <computeroutput>master</computeroutput> or any branch by creating a <emphasis>flat release</emphasis> (that is having a layout similar to a release rather than a branch layout with header files gathered by packages).</para><para>The creation of the flat release is done using the script <computeroutput>create_internal_release</computeroutput> located in the directory <computeroutput>Scripts/developer_scripts</computeroutput>. Running the script with no argument will give the complete usage of this script. We only describe one way of using it.</para><para>The prerequisite is to have a checkout of the branch we want to test. In the example, it will be located in <computeroutput>~/Git/cgal/</computeroutput>.</para><para>First one goes into a directory where the flat release will be created: <programlisting><codeline><highlight class="normal">&gt;<sp/>cd<sp/>/tmp</highlight></codeline>
</programlisting></para><para>Then the script <computeroutput>create_internal_release</computeroutput> is ran: <programlisting><codeline><highlight class="normal">&gt;<sp/><sp/>create_internal_release<sp/>-r<sp/>CGAL-I-FOO<sp/>-a<sp/>~/Git/cgal/</highlight></codeline>
</programlisting></para><para>The directory <computeroutput>CGAL-I-FOO</computeroutput> now contains the flat release of the branch in <computeroutput>~/Git/cgal</computeroutput>. Then you need to compile this flat release and set <computeroutput>CGAL_DIR</computeroutput> accordingly as explained in the installation manual.</para><para>To run the test-suite simply do: <programlisting><codeline><highlight class="normal">&gt;<sp/>cd<sp/>CGAL-I-FOO/test</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/>./run_testsuite_with_cmake</highlight></codeline>
</programlisting> and wait for the results to be written in the file <computeroutput>error.txt</computeroutput>. </para></sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
