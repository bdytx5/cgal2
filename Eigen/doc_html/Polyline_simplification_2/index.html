<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="canonical" href="https://doc.cgal.org/latest/Polyline_simplification_2/index.html"/>

<link rel="icon" type="image/png" href="../Manual/g-196x196-doc.png" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta name="generator" content="Doxygen 1.8.13" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CGAL 4.13 - 2D Polyline Simplification: User Manual</title>
<!-- <link href="../Manual/tabs.css" rel="stylesheet" type="text/css"/> -->
<script type="text/javascript" src="../Manual/jquery.js"></script>
<script type="text/javascript" src="../Manual/dynsections.js"></script>
<!-- Manually include treeview and search to avoid bloat and to fix
     paths to the directory Manual . -->
<!-- $.treeview -->
<!-- $.search -->
<link href="navtree.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Manual/resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../Manual/search/search.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Manual/search/searchdata.js"></script>
<script type="text/javascript" src="../Manual/search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../Manual/search/search.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Manual/search/search.js"></script>
<!-- Manually done below. -->
<link href="../Manual/stylesheet.css" rel="stylesheet" type="text/css" />
<!-- This should probably be an extrastylesheet instead of hardcoded. -->
<link href="../Manual/cgal_stylesheet.css" rel="stylesheet" type="text/css" />
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<script src="../Manual/hacks.js" type="text/javascript"></script>
<script src="modules.js" type="text/javascript"></script>
</head>
<body>
<!-- Custom mathjax -->
<!-- TODO: Remove this with MATHJAX_CODEFILE -->
<span style="display:none">\( \newcommand{\E}{\mathrm{E}} \) \( \newcommand{\A}{\mathrm{A}} \)
\( \newcommand{\R}{\mathrm{R}} \) \( \newcommand{\N}{\mathrm{N}} \) \( \newcommand{\Q}{\mathrm{Q}} \) \( \newcommand{\Z}{\mathrm{Z}} \)
\(
\def\ccSum #1#2#3{
  \sum_{#1}^{#2}{#3}
}
\def\ccProd #1#2#3{
  \sum_{#1}^{#2}{#3}
}\)
</span>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="back-nav">
  <ul>
    <li><a href="https://www.cgal.org/">cgal.org</a></li>
    <li><a href="../Manual/index.html">Top</a></li>
    <li><a href="../Manual/general_intro.html">Getting Started</a></li>
    <li><a href="../Manual/tutorials.html">Tutorials</a></li>
    <li><a href="../Manual/packages.html">Package Overview</a></li>
    <li><a href="../Manual/how_to_cite_cgal.html">Acknowledging CGAL</a></li>
  </ul>
  <!-- In a package SEARCHENGINE = false, so we cannot use 
       insertion. That's why we have to do it manually here. Notice
       that we also take pngs from the Manual. -->
  <div id="MSearchBox" class="MSearchBoxInactive">
    <span class="left">
      <img id="MSearchSelect" src="../Manual/search/mag_sel.png" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" alt="" />
      <input type="text" id="MSearchField" value="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)" />
    </span><span class="right">
      <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../Manual/search/close.png" alt="" /></a>
    </span>
  </div>
</div>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CGAL 4.13 - 2D Polyline Simplification
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Code below is usually inserted by doxygen when SEARCHENGINE =
     true. Notice that the path to the search directory is adjusted to
     the top-level.-->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../Manual/search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" name="MSearchResults" id="MSearchResults">
</iframe>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync" style="display: none"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">User Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="Chapter_2D_Polyline_simplification"></a>  </p><div id="autotoc" class="toc"></div>  <dl class="section author"><dt>Author</dt><dd>Andreas Fabri</dd></dl>
<div class="image">
<img src="kilimanjaro.png" alt="kilimanjaro.png" />
</div>
<p>This package allows to simplify polylines with the guarantee that the topology of the polylines does not change. This can be done for a single polyline as well as for a set of polyline constraints in a constrained triangulation. The simplification can be controlled with cost and stop functions.</p>
<h1><a class="anchor" id="Section_PolylineSimplification_Introduction"></a>
Introduction</h1>
<p><em>Polyline simplification</em> is the process of reducing the number of vertices used in a set of polylines while keeping the overall shape as much as possible.</p>
<p><em>Topology preserving polyline simplification</em> means that neither intersections are introduced, nor the nesting level of a polygon changes: islands do not intersect a simplified coastline, and islands stay in the water.</p>
<p>The method implemented in this package is based on <a class="el" href="citelist.html#CITEREF_cgal:dds-scs-09">[1]</a>. It can simplify any set of polylines, open or closed, and possibly intersecting themselves or each other. The method consists of iteratively replacing edges <code>(p,q)</code> and <code>(q,r)</code> with edge <code>(p,r)</code> by removing the vertex <code>q</code> from one polyline. The topology of the polyline set is preserved during the simplification as the algorithm guarantees that no new intersections occur as a result of removing a vertex.</p>
<p>Vertices are removed according to a priority given for the vertex by a user-supplied <em>cost</em> function which calculates the <em>simplification error</em>. The cost function is a measure of the deviation between the original polyline and the current polyline without the vertex.</p>
<p>The algorithm terminates when a user-supplied <em>stop predicate</em> returns true, for instance, upon reaching a desired number of vertices or reaching a maximum simplification error.</p>
<p>The polyline simplification algorithm operates on a triangulation class from Chapter <a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Manual.tag:../Manual/" href="../Manual/packages.html#PkgTriangulation2Summary">2D Triangulation</a>, namely <code><a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html">Constrained_triangulation_plus_2</a></code>. This data structure allows to remove vertices of a polyline constraint, while keeping the points of the removed vertices of the polyline constraint. The fact that it is a triangulation allows to perform the topology check for vertices <code>p,q,r</code> efficiently, as this can be decided based on the set of vertices adjacent to <code>q</code> in the triangulation.</p>
<p><a class="anchor" id="fig__figure_platelet"></a></p><div class="image">
<img src="platelet.png" alt="platelet.png" />
</div>
   <div class="cgal_figure_caption">  <a class="el" href="index.html#fig__figure_platelet">Figure 22.1</a> Check if vertex <code>q</code> can be removed.  </div>  <br />

<h1><a class="anchor" id="Section_PolylineSimplification_Cost_Functions"></a>
Cost Functions</h1>
<p>The specific way in which the removal cost is calculated is called the <em>cost</em> function. The user can choose different strategies by choosing a cost function object.</p>
<p>This package provides the three cost functions formulated in <a class="el" href="citelist.html#CITEREF_cgal:dds-scs-09">[1]</a>. As the cost function is a template argument of the simplification function, users can write and use their own. The provided cost functions are all based on measuring the Euclidean distance between a subsequence of the original polyline and the corresponding subsequence of the simplified polyline with the vertex whose cost is calculated being removed.</p>
<p>Let vertices <code>p</code>, <code>q</code>, and <code>r</code> be three consecutive vertices of a polyline constraint. If the vertex <code>q</code> is removed, the edges <code>(p,q)</code> and <code>(q,r)</code> would be replaced by the edge <code>(p,r)</code>.</p>
<h2><a class="anchor" id="Subsection_PolylineSimplification_Maximum_Squared_Distance"></a>
Maximum Squared Distance</h2>
<p>The maximum squared distance is the maximum of the squared Euclidean distances between each point on the original polyline between <code>p</code> and <code>r</code> and the line segment <code>(p,r)</code>. Let \(s_0,...,s_n\) be the points strictly between <code>p</code> and <code>r</code> on the original polyline. The cost of removing vertex <code>q</code> is: \( v_1 = \max \{ \mathrm{squared\_distance}((p,r), s_i) | i=0,..,n\} \)</p>
<p><a class="anchor" id="fig__figure_maxDist"></a></p><div class="image">
<img src="maxDist.png" alt="maxDist.png" />
</div>
   <div class="cgal_figure_caption">  <a class="el" href="index.html#fig__figure_maxDist">Figure 22.2</a> The maximum squared distance between <code>q</code> and <code>(p,r)</code>  </div>  <br />

<h2><a class="anchor" id="Subsection_PolylineSimplification_Scaled_Maximum_Squared_Distance"></a>
Scaled Maximum Squared Distance</h2>
<p>When it is important to preserve the separation of adjacent polylines, a variation of the maximum squared distance cost can be used. Here the maximum is divided by the minimum squared Euclidean distance between the candidate vertex <code>q</code> and all its adjacent vertices (except <code>p</code> and <code>r</code>). Those are all vertices in adjacent polylines, or adjacent regions of the same polyline.</p>
<p>Let \(t_0,...,t_m\) be the points of the vertices adjacent to vertex <code>q</code>, different from <code>p</code> and <code>r</code> and let \( v_2 = \min \{ \mathrm{squared\_distance}((p,r), t_i) | i=0,..,n\}\). The cost of removing vertex <code>q</code> is \(v_1/v_2\), and it is +infinity when the set of points \({t_1..t_m}\) is empty (possible if the point <code>q</code> is on the convex hull). See also <a class="el" href="index.html#fig__figure_scaledAndHybrid">Figure 22.3</a>.</p>
<p>This distance measure gives lower priority to vertices with close neighboring polylines.</p>
<h2><a class="anchor" id="Subsection_PolylineSimplification_Hybrid_Maximum_Squared_Distance"></a>
Hybrid Maximum Squared Distance</h2>
<p>The scaled maximum works well in areas with close neighboring polylines, while the absolute maximum works <em>better</em> in areas where the polylines are far apart. In certain applications such as cartographic contours, there are both dense and spare areas, so a good strategy is to use a scaled or an absolute maximum depending on the case.</p>
<p>The hybrid distance measure uses a parameter \(R\) to indicate which measure to use: if \(v_2\) , i.e., the minimum distance to adjacent vertices, is below \(R\), the scaled maximum is used, otherwise the absolute maximum is used.</p>
<p>The cost of removing vertex <code>q</code> is \(v_1/v_2\), if \(v_2 &lt;R\), and \(v_1/R\), otherwise.</p>
<p>As Dyken&amp;al. explain, the choice of a good value for \(R\) is problem specific. It may depend on the pen size or the pixel size when drawing, or on the grid size when the polyline points are on a grid.</p>
<p><a class="anchor" id="fig__figure_scaledAndHybrid"></a></p><div class="image">
<img src="scaledAndHybridMaxDist.png" alt="scaledAndHybridMaxDist.png" />
</div>
   <div class="cgal_figure_caption">  <a class="el" href="index.html#fig__figure_scaledAndHybrid">Figure 22.3</a> The scaled and hybrid maximum squared distance between <code>q</code> and <code>(p,r)</code>.  </div>  <br />

<h1><a class="anchor" id="Section_PolylineSimplification_Examples"></a>
Examples</h1>
<p>The first example shows how to simplify a <code><a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Polygon.tag:../Polygon/" href="../Polygon/classCGAL_1_1Polygon__2.html">Polygon_2</a></code>. We then show how to simplify simultaneously several polylines, and show how to mark polyline vertices so that they do not get removed. The last example shows how to keep, access, and really remove points of polyline vertices that got removed by the simplification.</p>
<h2><a class="anchor" id="Subsection_PolylineSimplification_Simplifying"></a>
Simplifying a Polygon</h2>
<p>The first example shows how to simplify a single polyline by halving the number of vertices.</p>
<p><br />
<b>File</b> <a class="el" href="Polyline_simplification_2_2simplify_polygon_8cpp-example.html">Polyline_simplification_2/simplify_polygon.cpp</a> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polygon_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polyline_simplification_2/simplify.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span>PS = <a class="code" href="namespaceCGAL_1_1Polyline__simplification__2.html">CGAL::Polyline_simplification_2</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Kernel_23.tag:../Kernel_23/" href="../Kernel_23/classCGAL_1_1Exact__predicates__inexact__constructions__kernel.html">CGAL::Exact_predicates_inexact_constructions_kernel</a> K;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Polygon.tag:../Polygon/" href="../Polygon/classCGAL_1_1Polygon__2.html">CGAL::Polygon_2&lt;K&gt;</a>                   Polygon_2;</div><div class="line"><span class="keyword">typedef</span> PS::Stop_below_count_ratio_threshold Stop;</div><div class="line"><span class="keyword">typedef</span> PS::Squared_distance_cost            Cost;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">  Polygon_2 polygon;</div><div class="line">  std::cin &gt;&gt; polygon;</div><div class="line">  Cost cost;</div><div class="line">  polygon = <a class="code" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f">PS::simplify</a>(polygon, cost, Stop(0.5));</div><div class="line">  </div><div class="line">  std::cout.precision(12);</div><div class="line">  std::cout &lt;&lt; polygon &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"></div></div><!-- fragment --><h2><a class="anchor" id="Subsection_PolylineSimplification_Simplifying_Several"></a>
Simplifying Several Polylines</h2>
<p>In the second example we insert several polygons in a <code><a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html">Constrained_triangulation_plus_2</a></code>. As a vertex type we have to use <code><a class="el" href="classCGAL_1_1Polyline__simplification__2_1_1Vertex__base__2.html" title="A vertex base class with data members needed by the simplification algorithm. ">CGAL::Polyline_simplification_2::Vertex_base_2</a></code> as vertices may be marked as non-removable. The simplification algorithm marks the first and last vertex of polyline constraints as well as intersections. Finally, we iterate over all vertices of all polyline constraints.</p>
<p><br />
<b>File</b> <a class="el" href="Polyline_simplification_2_2simplify_8cpp-example.html">Polyline_simplification_2/simplify.cpp</a> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polygon_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Constrained_Delaunay_triangulation_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Constrained_triangulation_plus_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polyline_simplification_2/simplify.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polyline_simplification_2/Squared_distance_cost.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span>PS = <a class="code" href="namespaceCGAL_1_1Polyline__simplification__2.html">CGAL::Polyline_simplification_2</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Kernel_23.tag:../Kernel_23/" href="../Kernel_23/classCGAL_1_1Exact__predicates__inexact__constructions__kernel.html">CGAL::Exact_predicates_inexact_constructions_kernel</a> K;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Polygon.tag:../Polygon/" href="../Polygon/classCGAL_1_1Polygon__2.html">CGAL::Polygon_2&lt;K&gt;</a>                                  Polygon_2;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> PS::Vertex_base_2&lt;K&gt; Vb;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__face__base__2.html">CGAL::Constrained_triangulation_face_base_2&lt;K&gt;</a> Fb;</div><div class="line"><span class="keyword">typedef</span> CGAL::Triangulation_data_structure_2&lt;Vb, Fb&gt; TDS;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__Delaunay__triangulation__2.html">CGAL::Constrained_Delaunay_triangulation_2&lt;K, TDS, CGAL::Exact_predicates_tag&gt;</a> CDT;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html">CGAL::Constrained_triangulation_plus_2&lt;CDT&gt;</a>     CT;</div><div class="line"><span class="keyword">typedef</span> CT::Point                           Point;</div><div class="line"><span class="keyword">typedef</span> CT::Constraint_iterator             Constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> CT::Vertices_in_constraint_iterator Vertices_in_constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> CT::Points_in_constraint_iterator   Points_in_constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> PS::Stop_below_count_ratio_threshold Stop;</div><div class="line"><span class="keyword">typedef</span> PS::Squared_distance_cost Cost;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">  CT ct;</div><div class="line">  Polygon_2 P;</div><div class="line">  <span class="keywordflow">while</span>(std::cin &gt;&gt; P){</div><div class="line">    ct.<a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html#aa8870c3ead46efaac0c7c7f3916b4ed5">insert_constraint</a>(P);</div><div class="line">  }</div><div class="line">  <a class="code" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f">PS::simplify</a>(ct, Cost(), Stop(0.5));</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span>(Constraint_iterator cit = ct.constraints_begin();</div><div class="line">      cit != ct.constraints_end();</div><div class="line">      ++cit) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">"simplified polyline"</span> &lt;&lt; std::endl;</div><div class="line">    <span class="keywordflow">for</span>(Points_in_constraint_iterator vit = </div><div class="line">          ct.points_in_constraint_begin(*cit);</div><div class="line">        vit != ct.points_in_constraint_end(*cit);</div><div class="line">        ++vit)</div><div class="line">      std::cout &lt;&lt; *vit &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"></div></div><!-- fragment --><h2><a class="anchor" id="Subsection_PolylineSimplification_Keeping"></a>
Keeping Points While Removing Vertices</h2>
<p>In this example we show the version of <code><a class="el" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f" title="Simplifies a single polygon. ">Polyline_simplification_2::simplify()</a></code> that simplifies a single polyline constraint, and keeps the points while removing vertices.</p>
<p>During the simplification the cost functions need the original sequence of points. As explained in the introduction the <code><a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html">Constrained_triangulation_plus_2</a></code> allows to remove vertices from a polyline constraint, and hence from the triangulation, while keeping the points in the polyline constraint. This explains why there is a <a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html#a0d38b6bac2db9859af3ff67c2226f3e8"><code>Vertices_in_constraint_iterator</code></a> and a <a class="elRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html#ab375f52ab119f4c636371ea6daf7b128"><code>Point_in_constraint_iterator</code></a>.</p>
<p>With the last argument of <code><a class="el" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f" title="Simplifies a single polygon. ">Polyline_simplification_2::simplify()</a></code> set to <code>true</code>, we can keep the points even when the simplification function has returned. We might want to keep them, because we want to call <code><a class="el" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f" title="Simplifies a single polygon. ">Polyline_simplification_2::simplify()</a></code> once again for the same polyline constraint, while measuring the simplification error against the original polyline.</p>
<p>The print function traverses each polyline constraint twice. First we print the points on the simplified polyline, and then we print the points of the original polyline.</p>
<p>At the end we remove the points that were kept from the constraints.</p>
<p><br />
<b>File</b> <a class="el" href="Polyline_simplification_2_2points_and_vertices_8cpp-example.html">Polyline_simplification_2/points_and_vertices.cpp</a> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polygon_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Constrained_Delaunay_triangulation_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Constrained_triangulation_plus_2.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CGAL/Polyline_simplification_2/simplify.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span>PS = <a class="code" href="namespaceCGAL_1_1Polyline__simplification__2.html">CGAL::Polyline_simplification_2</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Kernel_23.tag:../Kernel_23/" href="../Kernel_23/classCGAL_1_1Exact__predicates__inexact__constructions__kernel.html">CGAL::Exact_predicates_inexact_constructions_kernel</a> K;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Polygon.tag:../Polygon/" href="../Polygon/classCGAL_1_1Polygon__2.html">CGAL::Polygon_2&lt;K&gt;</a>    Polygon_2;</div><div class="line"><span class="keyword">typedef</span> PS::Vertex_base_2&lt;K&gt;  Vb;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__face__base__2.html">CGAL::Constrained_triangulation_face_base_2&lt;K&gt;</a> Fb;</div><div class="line"><span class="keyword">typedef</span> CGAL::Triangulation_data_structure_2&lt;Vb, Fb&gt; TDS;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/structCGAL_1_1Exact__predicates__tag.html">CGAL::Exact_predicates_tag</a>                          Itag;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__Delaunay__triangulation__2.html">CGAL::Constrained_Delaunay_triangulation_2&lt;K,TDS, Itag&gt;</a> CDT;</div><div class="line"><span class="keyword">typedef</span> <a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html">CGAL::Constrained_triangulation_plus_2&lt;CDT&gt;</a>     CT;</div><div class="line"><span class="keyword">typedef</span> CT::Point                           Point;</div><div class="line"><span class="keyword">typedef</span> CT::Constraint_id                   Constraint_id;</div><div class="line"><span class="keyword">typedef</span> CT::Constraint_iterator             Constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> CT::Vertices_in_constraint_iterator Vertices_in_constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> CT::Points_in_constraint_iterator   Points_in_constraint_iterator;</div><div class="line"><span class="keyword">typedef</span> PS::Stop_below_count_ratio_threshold Stop;</div><div class="line"><span class="keyword">typedef</span> PS::Squared_distance_cost Cost;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> print(<span class="keyword">const</span> CT&amp; ct, Constraint_id cid)</div><div class="line">{</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">"simplified polyline"</span> &lt;&lt;std::endl;</div><div class="line">  <span class="keywordflow">for</span>(Vertices_in_constraint_iterator vit = </div><div class="line">        ct.vertices_in_constraint_begin(cid);</div><div class="line">      vit != ct.vertices_in_constraint_end(cid);</div><div class="line">      ++vit){</div><div class="line">    std::cout &lt;&lt; (*vit)-&gt;point() &lt;&lt; std::endl ;</div><div class="line">  }</div><div class="line">  </div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">"original points"</span> &lt;&lt;std::endl;</div><div class="line">  <span class="keywordflow">for</span>(Points_in_constraint_iterator pit = </div><div class="line">        ct.points_in_constraint_begin(cid);</div><div class="line">      pit != ct.points_in_constraint_end(cid);</div><div class="line">      ++pit){</div><div class="line">    std::cout &lt;&lt; *pit &lt;&lt; std::endl ;</div><div class="line">  }</div><div class="line">  </div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">bool</span> remove_points = <span class="keyword">false</span>;</div><div class="line">  CT ct;</div><div class="line">  Polygon_2 P;</div><div class="line">  Constraint_id cid;</div><div class="line">  std::size_t largest = 0;</div><div class="line">  <span class="keywordflow">while</span>(std::cin &gt;&gt; P){</div><div class="line">    Constraint_id cid2 = ct.<a class="codeRef" doxygen="/home/cgal-testsuite/cgal_doc_build/CGAL-4.13-I-128/doc/scripts/doc_1_8_13/doc_tags/Triangulation_2.tag:../Triangulation_2/" href="../Triangulation_2/classCGAL_1_1Constrained__triangulation__plus__2.html#aa8870c3ead46efaac0c7c7f3916b4ed5">insert_constraint</a>(P);</div><div class="line">    <span class="keywordflow">if</span>(P.size() &gt; largest){</div><div class="line">      cid = cid2;</div><div class="line">    }</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f">PS::simplify</a>(ct, cid, Cost(), Stop(0.5), remove_points);</div><div class="line">  print(ct, cid);</div><div class="line">  <a class="code" href="group__PkgPolylineSimplification2Functions.html#ga14363407af0fc426a6ec50e41aa69a5f">PS::simplify</a>(ct, cid, Cost(), Stop(0.5), remove_points);</div><div class="line">  ct.remove_points_without_corresponding_vertex(cid);</div><div class="line">  print(ct, cid);  </div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"></div></div><!-- fragment --><h1><a class="anchor" id="Section_PolylineSimplification_History"></a>
Design and Implementation History</h1>
<p>Dyken et al <a class="el" href="citelist.html#CITEREF_cgal:dds-scs-09">[1]</a> combine a classical polyline simplification algorithm with the triangulation of polylines in order to check if an elementary simplification step can be performed. In our implementation we simplified this test even further.</p>
<p>Fernando Cacciola made a first prototype implementation for GeometryFactory. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<!-- The footer div is not part of the default but we require it to
move the footer to the bottom of the page. -->
<div id="footer">
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 1 2018 11:58:38 for CGAL 4.13 - 2D Polyline Simplification by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen" /></a> 1.8.13 </li>
  </ul>
</div>
</div>
</body>


</html>
